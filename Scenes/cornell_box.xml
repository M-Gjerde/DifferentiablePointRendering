<?xml version="1.0" encoding="utf-8"?>
<scene version="3.0.0">
    <integrator type="path"/>  <!-- add this -->

    <sensor type="perspective">
        <transform name="to_world">
            <lookat origin="0, 1, 3.2" target="0, 1, 0" up="0,1,0"/>
        </transform>
        <float name="fov" value="39.3077"/>
        <sampler type="independent">            <!-- optional, but explicit -->
            <integer name="sample_count" value="32"/>
        </sampler>
        <film type="hdrfilm">
            <integer name="width" value="256"/>
            <integer name="height" value="256"/>
        </film>
    </sensor>

    <!-- Materials -->
    <bsdf type="diffuse" id="white">
        <rgb name="reflectance" value="0.8,0.8,0.8"/>
    </bsdf>
    <bsdf type="diffuse" id="red">
        <rgb name="reflectance" value="0.8,0.1,0.1"/>
    </bsdf>
    <bsdf type="diffuse" id="green">
        <rgb name="reflectance" value="0.12,0.8,0.12"/>
    </bsdf>
    <!-- Materials -->

    <!-- Floor -->
    <shape type="rectangle">
        <ref id="white"/>
        <transform name="to_world">
            <rotate x="1" y="0" z="0" angle="-90"/>
            <scale x="2" y="2" z="2"/>
            <translate x="0" y="0" z="0"/>
        </transform>
    </shape>

    <!-- Ceiling -->
    <shape type="rectangle">
        <ref id="white"/>
        <transform name="to_world">
            <rotate x="1" y="0" z="0" angle="90"/>
            <scale x="2" y="2" z="2"/>
            <translate x="0" y="2" z="0"/>
        </transform>
    </shape>

    <!-- Back wall -->
    <shape type="rectangle">
        <ref id="white"/>
        <transform name="to_world">
            <scale x="2" y="2" z="2"/>
            <translate x="0" y="1" z="-1"/>
            <rotate x="1" y="0" z="0" angle="360"/>
        </transform>
    </shape>

    <!-- Left wall (red) at x = -1, normal +X -->
    <shape type="rectangle">
        <ref id="red"/>
        <transform name="to_world">
            <rotate x="0" y="1" z="0" angle="90"/>
            <scale x="2" y="2" z="2"/>
            <translate x="-1" y="1" z="0"/>
        </transform>
    </shape>

    <!-- Right wall (green) at x = +1, normal -X -->
    <shape type="rectangle">
        <ref id="green"/>
        <transform name="to_world">
            <rotate x="0" y="1" z="0" angle="-90"/>
            <scale x="2" y="2" z="2"/>
            <translate x="1" y="1" z="0"/>
        </transform>
    </shape>

    <!-- Plane in the middle -->
    <shape type="rectangle">
        <ref id="white"/>
        <transform name="to_world">
            <rotate x="1" y="0" z="0" angle="-80"/>
            <scale x="0.3" y="0.3" z="0.3"/>
            <translate x="0" y="0.3" z="-0.3"/>
        </transform>
    </shape>

    <!-- Small area light near the ceiling -->
    <shape type="rectangle">
        <bsdf type="diffuse">
            <rgb name="reflectance" value="0.0,0.0,0.0"/>
        </bsdf>
        <emitter type="area">
            <rgb name="radiance" value="5,5,5"/>
        </emitter>
        <transform name="to_world">
            <rotate x="1" y="0" z="0" angle="90"/>
            <scale x="0.3" y="0.3" z="0.3"/>
            <translate x="0" y="1.98" z="0"/>
        </transform>
    </shape>
</scene>
